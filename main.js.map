{"version":3,"file":"main.js","mappings":"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","sources":["webpack://ahj-testing/./src/js/app.js","webpack://ahj-testing/./src/js/CardWidjet.js","webpack://ahj-testing/./src/js/Validity.js"],"sourcesContent":["import CartWidjet from './CardWidjet';\n\nconst card = new CartWidjet();\ncard.init();\n","import { validNum, cardType } from './Validity';\n\nexport default class CartWidjet {\n  constructor() {\n    this.container = document.querySelector('.container');\n    this.form = this.container.querySelector('.form');\n    this.input = this.form.querySelector('.input');\n    this.button = this.form.querySelector('.submit');\n    this.cards = Array.from(this.container.querySelectorAll('.card'));\n    this.messageContainer = this.container.querySelector('.message_container');\n    this.message = this.messageContainer.querySelector('.message');\n\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  init() {\n    this.form.addEventListener('submit', this.onSubmit);\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const result = validNum(this.input.value);\n    this.invalidCard();\n\n    if (this.input.value === '') {\n      this.message.textContent = 'Введите номер карты';\n      this.cards.forEach((el) => {\n        el.classList.remove('valid');\n      });\n    } else if (result) {\n      this.message.textContent = 'Верный номер карты';\n      this.input.style.color = 'green';\n      this.currentCard();\n    } else {\n      this.input.style.color = 'red';\n      this.message.textContent = 'Такой карты не существует';\n      this.invalidCard();\n    }\n  }\n\n  currentCard() {\n    const element = cardType(this.input.value);\n\n    this.cards.forEach((el) => {\n      if (el.classList.contains(`${element}`)) {\n        el.classList.add('valid');\n      }\n    });\n  }\n\n  invalidCard() {\n    this.cards.forEach((el) => {\n      if (el.classList.contains('valid')) {\n        el.classList.remove('valid');\n      }\n    });\n  }\n}\n","export function validNum(value) {\n  const arr = value.split('');\n  let sum = 0;\n\n  if (arr.length % 2 === 0) {\n    for (let i = arr.length - 1; i >= 0; i -= 1) {\n      if (i % 2 !== 0) {\n        sum += +arr[i];\n      } else {\n        let x = +arr[i] * 2;\n        if (x > 9) x -= 9;\n        sum += x;\n      }\n    }\n  } else {\n    for (let i = arr.length - 1; i >= 0; i -= 1) {\n      if (i % 2 === 0) {\n        sum += +arr[i];\n      } else {\n        let x = +arr[i] * 2;\n        if (x > 9) x -= 9;\n        sum += x;\n      }\n    }\n  }\n\n  if (sum % 10 === 0) return true;\n\n  return false;\n}\n\nexport function cardType(number) {\n  const num = String(number);\n  const firstTwo = num.slice(0, 2);\n  const firstThree = num.slice(0, 3);\n  const firstFour = num.slice(0, 4);\n  const firstSix = num.slice(0, 6);\n\n  if (num.length === 16 || num.length === 19) {\n    if (num.startsWith('5018') || num.startsWith('5020') || num.startsWith('5038') || num.startsWith('5893') || num.startsWith('6304') || num.startsWith('6759') || num.startsWith('6761') || num.startsWith('6762') || num.startsWith('6763')) {\n      return 'maestro';\n    }\n\n    if (Number(firstSix) >= 622126 && Number(firstSix) <= 622925 || Number(firstThree) >= 644 && Number(firstThree) <= 649 || num.startsWith('65') || num.startsWith('6011')) {\n      return 'discover';\n    }\n\n    if (Number(firstFour) >= 3528 && Number(firstFour) <= 3589) {\n      return 'jcb';\n    }\n  }\n\n  if (num.length === 16) {\n    if (Number(firstTwo) >= 51 && Number(firstTwo) <= 55 || Number(firstSix) >= 222100 && Number(firstSix) <= 272099) {\n      return 'master';\n    }\n\n    if (Number(firstFour) >= 2200 && Number(firstFour) <= 2204) {\n      return 'mir';\n    }\n  }\n\n  if (num.length === 13 || num.length === 16 || num.length === 19) {\n    if (num.startsWith('4')) {\n      return 'visa';\n    }\n  }\n  return 'Другая платежная система';\n}\n"],"names":["constructor","this","container","document","querySelector","form","input","button","cards","Array","from","querySelectorAll","messageContainer","message","onSubmit","bind","init","addEventListener","e","preventDefault","result","value","arr","split","sum","length","i","x","validNum","invalidCard","textContent","forEach","el","classList","remove","style","color","currentCard","element","number","num","String","firstTwo","slice","firstThree","firstFour","firstSix","startsWith","Number","cardType","contains","add"],"sourceRoot":""}